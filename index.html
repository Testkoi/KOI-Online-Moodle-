
<!-- KOI Online MBA Home - HTML Fragment -->
<!-- INSTRUCTIONS: Paste into Moodle Source Mode -->

<!-- Dependencies -->
<script src="https://cdn.tailwindcss.com/3.4.3"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<script>
  tailwind.config = {
    theme: {
      extend: {
        fontFamily: {
          sans: ['"Plus Jakarta Sans"', 'sans-serif'],
        },
        colors: {
          koi: {
             sky: '#4ac4d0',
             orange: '#f57238',
             brown: '#c0a480',
             dark: '#2d618e',
             light: '#f8fafc',
          }
        },
        boxShadow: {
            'glow': '0 0 20px rgba(74, 196, 208, 0.15)',
            'float': '0 10px 40px -10px rgba(0,0,0,0.15)',
        }
      }
    }
  }
</script>

<style>
  /* Global Smooth Scrolling */
  html { scroll-behavior: smooth; }

  .koi-wrapper { 
    -webkit-font-smoothing: antialiased; 
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  /* Carousel Transitions - Hardware Accelerated */
  .carousel-track { 
    transition: transform 0.7s cubic-bezier(0.2, 0.8, 0.2, 1); 
    will-change: transform;
  }
  
  /* Floating Nav Buttons */
  .nav-float-btn {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease-out;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  .nav-float-btn:hover {
    transform: translateY(-50%) scale(1.15);
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
  }
  .nav-float-btn:active {
    transform: translateY(-50%) scale(0.95);
  }
  
  /* Dropdown Animation */
  #profile-dropdown {
    transform-origin: top right;
    transition: all 0.2s ease-out;
  }
  #profile-dropdown.hidden {
    opacity: 0;
    transform: scale(0.95) translateY(-10px);
    pointer-events: none;
    display: block; /* Override display none to allow transition */
    visibility: hidden;
  }
  #profile-dropdown:not(.hidden) {
    opacity: 1;
    transform: scale(1) translateY(0);
    visibility: visible;
  }

  /* Search Focus Animation */
  .search-container:focus-within {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
    border-color: #4ac4d0;
  }

  /* Namespace & Optimization Styles */
  .koi-mba-carousel-touch { touch-action: pan-y; }
  input[type="text"]:focus { outline: none; }

  /* Optimize Images */
  img {
      -webkit-user-drag: none;
      user-select: none;
  }

</style>

<div class="koi-wrapper font-sans min-h-screen bg-slate-50 flex flex-col">

    <!-- Top Banner -->
    <header class="bg-koi-dark text-white shadow-lg sticky top-0 z-50 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 h-16 flex justify-between items-center">
            <!-- Brand -->
            <div class="flex items-center gap-4">
                 <div class="w-10 h-10 bg-gradient-to-br from-koi-sky to-koi-dark rounded-lg border border-white/20 flex items-center justify-center text-white shadow-inner">
                    <i class="fas fa-graduation-cap text-lg"></i>
                 </div>
                 <div>
                     <h1 class="text-xl md:text-2xl font-extrabold tracking-tight leading-none">KOI <span class="text-koi-sky">Online MBA</span></h1>
                 </div>
            </div>
            
            <!-- Actions -->
            <div class="flex items-center gap-6">
                 <button class="hidden md:flex items-center gap-2 text-sm font-semibold text-blue-100 hover:text-white transition-colors">
                    <i class="far fa-question-circle"></i> Support
                 </button>
                 <div class="h-8 w-px bg-white/10 hidden md:block"></div>
                 
                 <!-- User Profile / Dropdown Trigger -->
                 <div class="relative">
                    <button onclick="window.toggleProfileMenu(event)" class="group flex items-center gap-3 py-1 px-2 rounded-lg hover:bg-white/10 transition-all focus:outline-none">
                        <div class="text-right hidden sm:block">
                            <p class="text-sm font-bold text-white leading-tight" id="user-fullname">Student</p>
                            <p class="text-xs text-koi-sky font-medium leading-tight" id="user-studentid">Student ID: N/A</p>
                        </div>
                        <img id="user-avatar" src="" class="w-10 h-10 rounded-full border-2 border-white/20 shadow-sm transition-all group-hover:border-white/50" alt="Profile">
                        <i class="fas fa-chevron-down text-xs text-blue-200 group-hover:text-white transition-colors"></i>
                    </button>

                    <!-- Profile Dropdown Menu -->
                    <div id="profile-dropdown" class="hidden absolute right-0 top-full mt-3 w-64 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50">
                        <div class="p-4 bg-gradient-to-r from-slate-50 to-white border-b border-slate-100">
                             <p class="text-sm font-bold text-koi-dark" id="menu-fullname">Student</p>
                             <p class="text-xs text-slate-500" id="menu-email">student@koi.edu.au</p>
                        </div>
                        <div class="py-2">
                            <a href="#" class="flex items-center px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-koi-orange transition-colors group">
                                <div class="w-8 h-8 rounded-full bg-slate-50 text-slate-400 flex items-center justify-center mr-3 group-hover:bg-orange-50 group-hover:text-koi-orange transition-colors">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <div>
                                    <span class="block font-semibold">My Profile</span>
                                    <span class="text-[10px] text-slate-400">Update details & photo</span>
                                </div>
                            </a>
                            <a href="#" class="flex items-center px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-koi-orange transition-colors group">
                                <div class="w-8 h-8 rounded-full bg-slate-50 text-slate-400 flex items-center justify-center mr-3 group-hover:bg-blue-50 group-hover:text-koi-dark transition-colors">
                                    <i class="fas fa-chart-bar"></i>
                                </div>
                                <div>
                                    <span class="block font-semibold">My Grades</span>
                                    <span class="text-[10px] text-slate-400">View academic history</span>
                                </div>
                            </a>
                             <a href="#" class="flex items-center px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-koi-orange transition-colors group">
                                <div class="w-8 h-8 rounded-full bg-slate-50 text-slate-400 flex items-center justify-center mr-3 group-hover:bg-green-50 group-hover:text-green-600 transition-colors">
                                    <i class="fas fa-cog"></i>
                                </div>
                                <div>
                                    <span class="block font-semibold">Settings</span>
                                    <span class="text-[10px] text-slate-400">Preferences & privacy</span>
                                </div>
                            </a>
                        </div>
                        <div class="border-t border-slate-100 bg-slate-50 p-2">
                             <a href="#" class="flex items-center justify-center w-full px-4 py-2 text-xs font-bold text-red-500 hover:bg-red-50 rounded-lg transition-colors">
                                <i class="fas fa-sign-out-alt mr-2"></i> Log Out
                             </a>
                        </div>
                    </div>
                 </div>
            </div>
        </div>
        <!-- Colored Bottom Border -->
        <div class="h-1 w-full bg-gradient-to-r from-koi-sky via-koi-orange to-koi-brown"></div>
    </header>

    <!-- Hero / Search Section -->
    <div class="bg-white border-b border-slate-200 pt-16 pb-20 px-6 relative overflow-hidden">
        <!-- Decor -->
        <div class="absolute top-0 right-0 w-96 h-96 bg-koi-sky/5 rounded-full blur-3xl translate-x-1/3 -translate-y-1/3 pointer-events-none transform-gpu"></div>

        <div class="max-w-4xl mx-auto text-center relative z-10">
            <h2 class="text-3xl md:text-5xl font-extrabold text-koi-dark mb-4 tracking-tight">
                Welcome to <span class="text-koi-orange">King's Own Institute</span>
            </h2>
            <p class="text-slate-500 mb-10 max-w-2xl mx-auto text-sm md:text-base">
                Access your world-class MBA learning materials. Search your units below or browse the featured modules.
            </p>

            <!-- Search Bar -->
            <div class="search-container bg-white border border-slate-200 rounded-full shadow-lg p-2 flex items-center max-w-xl mx-auto transition-all duration-300 transform-gpu">
                <div class="w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400">
                    <i class="fas fa-search"></i>
                </div>
                <input 
                    type="text" 
                    id="global-search" 
                    onkeyup="window.handleSearch()" 
                    placeholder="Search by unit code or name (e.g., MBA901)..." 
                    class="flex-grow px-4 py-2 text-sm text-koi-dark outline-none placeholder-slate-400 bg-transparent"
                >
                <button 
                    onclick="window.clearSearch()"
                    id="clear-btn"
                    class="w-8 h-8 rounded-full text-slate-300 hover:text-koi-orange hover:bg-orange-50 items-center justify-center hidden transition-colors"
                >
                    <i class="fas fa-times text-xs"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content: Swappable View -->
    <main class="flex-grow bg-slate-50 relative overflow-hidden">
        
        <!-- View 1: Premium Carousel (Default) -->
        <div id="view-carousel" class="max-w-7xl mx-auto px-4 sm:px-6 py-12 transition-opacity duration-300">
            <div class="flex justify-between items-end mb-8 px-2">
                <div>
                    <h3 class="text-2xl font-bold text-koi-dark flex items-center gap-2">
                        <i class="fas fa-star text-koi-orange"></i> Featured Units
                    </h3>
                    <p class="text-sm text-slate-400 mt-1">Your enrolled courses for Trimester 1</p>
                </div>
            </div>

            <!-- Carousel Viewport Wrapper -->
            <div class="relative group/carousel">
                
                <!-- Left Floating Button -->
                <button onclick="window.slide('prev')" id="btn-prev" class="nav-float-btn opacity-0 group-hover/carousel:opacity-100 disabled:opacity-0 disabled:pointer-events-none absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 md:-translate-x-6 z-20 w-14 h-14 bg-white/90 rounded-full shadow-float border border-white text-koi-dark flex items-center justify-center text-xl text-koi-dark hover:text-koi-orange">
                    <i class="fas fa-chevron-left"></i>
                </button>

                <!-- Track -->
                <div class="overflow-hidden py-8 -mx-4 px-4">
                    <div class="carousel-track flex items-stretch" id="track">
                        
    <div 
        class="min-w-full md:min-w-[50%] lg:min-w-[33.333%] px-4 course-item transition-all duration-500 ease-out"
        data-category="Strategy" 
        data-title="Strategic Management"
        data-code="MBA-601"
    >
      <div 
          class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 ease-out border border-slate-100 cursor-pointer h-full flex flex-col hover:-translate-y-1 transform-gpu" 
          onclick="window.selectCourse('1')"
      >
          <!-- Image Area -->
          <div class="relative h-48 overflow-hidden bg-slate-100">
              <img 
                src="https://picsum.photos/seed/strategy/400/200" 
                alt="Strategic Management" 
                loading="lazy" 
                decoding="async" 
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-[#2d618e]/90 via-[#2d618e]/10 to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-500"></div>
              
              <span class="absolute top-4 left-4 bg-white/95 backdrop-blur-md text-[#2d618e] text-[10px] font-extrabold px-3 py-1 rounded shadow-sm uppercase tracking-wider border border-slate-100">
                  Strategy
              </span>
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col flex-grow bg-white relative">
              <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] font-bold text-[#c0a480] uppercase tracking-widest">MBA-601</span>
              </div>
              
              <h3 class="text-lg font-bold text-[#2d618e] mb-2 leading-tight group-hover:text-[#4ac4d0] transition-colors">Strategic Management</h3>
              <p class="text-xs text-slate-500 mb-4 line-clamp-2">Study Strategy concepts with Dr. Sarah Jenkins.</p>

              <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
                   <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-400">
                          D
                      </div>
                      <span class="text-[10px] text-slate-400 font-bold uppercase">View Course</span>
                   </div>
                   <div class="w-8 h-8 rounded-full bg-[#f57238] flex items-center justify-center text-white shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                      <i class="fas fa-arrow-right text-xs"></i>
                   </div>
              </div>
          </div>
      </div>
    </div>
  
    <div 
        class="min-w-full md:min-w-[50%] lg:min-w-[33.333%] px-4 course-item transition-all duration-500 ease-out"
        data-category="Finance" 
        data-title="Corporate Finance"
        data-code="MBA-602"
    >
      <div 
          class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 ease-out border border-slate-100 cursor-pointer h-full flex flex-col hover:-translate-y-1 transform-gpu" 
          onclick="window.selectCourse('2')"
      >
          <!-- Image Area -->
          <div class="relative h-48 overflow-hidden bg-slate-100">
              <img 
                src="https://picsum.photos/seed/finance/400/200" 
                alt="Corporate Finance" 
                loading="lazy" 
                decoding="async" 
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-[#2d618e]/90 via-[#2d618e]/10 to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-500"></div>
              
              <span class="absolute top-4 left-4 bg-white/95 backdrop-blur-md text-[#2d618e] text-[10px] font-extrabold px-3 py-1 rounded shadow-sm uppercase tracking-wider border border-slate-100">
                  Finance
              </span>
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col flex-grow bg-white relative">
              <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] font-bold text-[#c0a480] uppercase tracking-widest">MBA-602</span>
              </div>
              
              <h3 class="text-lg font-bold text-[#2d618e] mb-2 leading-tight group-hover:text-[#4ac4d0] transition-colors">Corporate Finance</h3>
              <p class="text-xs text-slate-500 mb-4 line-clamp-2">Study Finance concepts with Prof. Michael Ross.</p>

              <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
                   <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-400">
                          P
                      </div>
                      <span class="text-[10px] text-slate-400 font-bold uppercase">View Course</span>
                   </div>
                   <div class="w-8 h-8 rounded-full bg-[#f57238] flex items-center justify-center text-white shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                      <i class="fas fa-arrow-right text-xs"></i>
                   </div>
              </div>
          </div>
      </div>
    </div>
  
    <div 
        class="min-w-full md:min-w-[50%] lg:min-w-[33.333%] px-4 course-item transition-all duration-500 ease-out"
        data-category="Marketing" 
        data-title="Digital Marketing"
        data-code="MBA-603"
    >
      <div 
          class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 ease-out border border-slate-100 cursor-pointer h-full flex flex-col hover:-translate-y-1 transform-gpu" 
          onclick="window.selectCourse('3')"
      >
          <!-- Image Area -->
          <div class="relative h-48 overflow-hidden bg-slate-100">
              <img 
                src="https://picsum.photos/seed/marketing/400/200" 
                alt="Digital Marketing" 
                loading="lazy" 
                decoding="async" 
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-[#2d618e]/90 via-[#2d618e]/10 to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-500"></div>
              
              <span class="absolute top-4 left-4 bg-white/95 backdrop-blur-md text-[#2d618e] text-[10px] font-extrabold px-3 py-1 rounded shadow-sm uppercase tracking-wider border border-slate-100">
                  Marketing
              </span>
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col flex-grow bg-white relative">
              <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] font-bold text-[#c0a480] uppercase tracking-widest">MBA-603</span>
              </div>
              
              <h3 class="text-lg font-bold text-[#2d618e] mb-2 leading-tight group-hover:text-[#4ac4d0] transition-colors">Digital Marketing</h3>
              <p class="text-xs text-slate-500 mb-4 line-clamp-2">Study Marketing concepts with Dr. Emily Chen.</p>

              <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
                   <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-400">
                          D
                      </div>
                      <span class="text-[10px] text-slate-400 font-bold uppercase">View Course</span>
                   </div>
                   <div class="w-8 h-8 rounded-full bg-[#f57238] flex items-center justify-center text-white shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                      <i class="fas fa-arrow-right text-xs"></i>
                   </div>
              </div>
          </div>
      </div>
    </div>
  
    <div 
        class="min-w-full md:min-w-[50%] lg:min-w-[33.333%] px-4 course-item transition-all duration-500 ease-out"
        data-category="Operations" 
        data-title="Business Analytics"
        data-code="MBA-604"
    >
      <div 
          class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 ease-out border border-slate-100 cursor-pointer h-full flex flex-col hover:-translate-y-1 transform-gpu" 
          onclick="window.selectCourse('4')"
      >
          <!-- Image Area -->
          <div class="relative h-48 overflow-hidden bg-slate-100">
              <img 
                src="https://picsum.photos/seed/analytics/400/200" 
                alt="Business Analytics" 
                loading="lazy" 
                decoding="async" 
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-[#2d618e]/90 via-[#2d618e]/10 to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-500"></div>
              
              <span class="absolute top-4 left-4 bg-white/95 backdrop-blur-md text-[#2d618e] text-[10px] font-extrabold px-3 py-1 rounded shadow-sm uppercase tracking-wider border border-slate-100">
                  Operations
              </span>
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col flex-grow bg-white relative">
              <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] font-bold text-[#c0a480] uppercase tracking-widest">MBA-604</span>
              </div>
              
              <h3 class="text-lg font-bold text-[#2d618e] mb-2 leading-tight group-hover:text-[#4ac4d0] transition-colors">Business Analytics</h3>
              <p class="text-xs text-slate-500 mb-4 line-clamp-2">Study Operations concepts with Prof. David Kim.</p>

              <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
                   <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-400">
                          P
                      </div>
                      <span class="text-[10px] text-slate-400 font-bold uppercase">View Course</span>
                   </div>
                   <div class="w-8 h-8 rounded-full bg-[#f57238] flex items-center justify-center text-white shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                      <i class="fas fa-arrow-right text-xs"></i>
                   </div>
              </div>
          </div>
      </div>
    </div>
  
                    </div>
                </div>

                <!-- Right Floating Button -->
                <button onclick="window.slide('next')" id="btn-next" class="nav-float-btn opacity-0 group-hover/carousel:opacity-100 disabled:opacity-0 disabled:pointer-events-none absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 md:translate-x-6 z-20 w-14 h-14 bg-white/90 rounded-full shadow-float border border-white text-koi-dark flex items-center justify-center text-xl text-koi-dark hover:text-koi-orange">
                    <i class="fas fa-chevron-right"></i>
                </button>

            </div>
        </div>

        <!-- View 2: Search Grid (Hidden by default) -->
        <div id="view-grid" class="max-w-7xl mx-auto px-6 py-12 hidden opacity-0 transition-opacity duration-300">
             <div class="flex justify-between items-center mb-6 border-b border-slate-200 pb-4">
                <h3 class="text-xl font-bold text-koi-dark">Search Results</h3>
                <span id="result-count" class="text-sm font-bold bg-koi-sky/10 text-koi-sky px-2 py-1 rounded">0 found</span>
             </div>
             
             <!-- Grid Container -->
             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="grid-container">
                
    <div 
        class="w-full course-item transition-all duration-500 ease-out"
        data-category="Strategy" 
        data-title="Strategic Management"
        data-code="MBA-601"
    >
      <div 
          class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 ease-out border border-slate-100 cursor-pointer h-full flex flex-col hover:-translate-y-1 transform-gpu" 
          onclick="window.selectCourse('1')"
      >
          <!-- Image Area -->
          <div class="relative h-48 overflow-hidden bg-slate-100">
              <img 
                src="https://picsum.photos/seed/strategy/400/200" 
                alt="Strategic Management" 
                loading="lazy" 
                decoding="async" 
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-[#2d618e]/90 via-[#2d618e]/10 to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-500"></div>
              
              <span class="absolute top-4 left-4 bg-white/95 backdrop-blur-md text-[#2d618e] text-[10px] font-extrabold px-3 py-1 rounded shadow-sm uppercase tracking-wider border border-slate-100">
                  Strategy
              </span>
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col flex-grow bg-white relative">
              <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] font-bold text-[#c0a480] uppercase tracking-widest">MBA-601</span>
              </div>
              
              <h3 class="text-lg font-bold text-[#2d618e] mb-2 leading-tight group-hover:text-[#4ac4d0] transition-colors">Strategic Management</h3>
              <p class="text-xs text-slate-500 mb-4 line-clamp-2">Study Strategy concepts with Dr. Sarah Jenkins.</p>

              <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
                   <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-400">
                          D
                      </div>
                      <span class="text-[10px] text-slate-400 font-bold uppercase">View Course</span>
                   </div>
                   <div class="w-8 h-8 rounded-full bg-[#f57238] flex items-center justify-center text-white shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                      <i class="fas fa-arrow-right text-xs"></i>
                   </div>
              </div>
          </div>
      </div>
    </div>
  
    <div 
        class="w-full course-item transition-all duration-500 ease-out"
        data-category="Finance" 
        data-title="Corporate Finance"
        data-code="MBA-602"
    >
      <div 
          class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 ease-out border border-slate-100 cursor-pointer h-full flex flex-col hover:-translate-y-1 transform-gpu" 
          onclick="window.selectCourse('2')"
      >
          <!-- Image Area -->
          <div class="relative h-48 overflow-hidden bg-slate-100">
              <img 
                src="https://picsum.photos/seed/finance/400/200" 
                alt="Corporate Finance" 
                loading="lazy" 
                decoding="async" 
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-[#2d618e]/90 via-[#2d618e]/10 to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-500"></div>
              
              <span class="absolute top-4 left-4 bg-white/95 backdrop-blur-md text-[#2d618e] text-[10px] font-extrabold px-3 py-1 rounded shadow-sm uppercase tracking-wider border border-slate-100">
                  Finance
              </span>
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col flex-grow bg-white relative">
              <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] font-bold text-[#c0a480] uppercase tracking-widest">MBA-602</span>
              </div>
              
              <h3 class="text-lg font-bold text-[#2d618e] mb-2 leading-tight group-hover:text-[#4ac4d0] transition-colors">Corporate Finance</h3>
              <p class="text-xs text-slate-500 mb-4 line-clamp-2">Study Finance concepts with Prof. Michael Ross.</p>

              <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
                   <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-400">
                          P
                      </div>
                      <span class="text-[10px] text-slate-400 font-bold uppercase">View Course</span>
                   </div>
                   <div class="w-8 h-8 rounded-full bg-[#f57238] flex items-center justify-center text-white shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                      <i class="fas fa-arrow-right text-xs"></i>
                   </div>
              </div>
          </div>
      </div>
    </div>
  
    <div 
        class="w-full course-item transition-all duration-500 ease-out"
        data-category="Marketing" 
        data-title="Digital Marketing"
        data-code="MBA-603"
    >
      <div 
          class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 ease-out border border-slate-100 cursor-pointer h-full flex flex-col hover:-translate-y-1 transform-gpu" 
          onclick="window.selectCourse('3')"
      >
          <!-- Image Area -->
          <div class="relative h-48 overflow-hidden bg-slate-100">
              <img 
                src="https://picsum.photos/seed/marketing/400/200" 
                alt="Digital Marketing" 
                loading="lazy" 
                decoding="async" 
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-[#2d618e]/90 via-[#2d618e]/10 to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-500"></div>
              
              <span class="absolute top-4 left-4 bg-white/95 backdrop-blur-md text-[#2d618e] text-[10px] font-extrabold px-3 py-1 rounded shadow-sm uppercase tracking-wider border border-slate-100">
                  Marketing
              </span>
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col flex-grow bg-white relative">
              <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] font-bold text-[#c0a480] uppercase tracking-widest">MBA-603</span>
              </div>
              
              <h3 class="text-lg font-bold text-[#2d618e] mb-2 leading-tight group-hover:text-[#4ac4d0] transition-colors">Digital Marketing</h3>
              <p class="text-xs text-slate-500 mb-4 line-clamp-2">Study Marketing concepts with Dr. Emily Chen.</p>

              <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
                   <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-400">
                          D
                      </div>
                      <span class="text-[10px] text-slate-400 font-bold uppercase">View Course</span>
                   </div>
                   <div class="w-8 h-8 rounded-full bg-[#f57238] flex items-center justify-center text-white shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                      <i class="fas fa-arrow-right text-xs"></i>
                   </div>
              </div>
          </div>
      </div>
    </div>
  
    <div 
        class="w-full course-item transition-all duration-500 ease-out"
        data-category="Operations" 
        data-title="Business Analytics"
        data-code="MBA-604"
    >
      <div 
          class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 ease-out border border-slate-100 cursor-pointer h-full flex flex-col hover:-translate-y-1 transform-gpu" 
          onclick="window.selectCourse('4')"
      >
          <!-- Image Area -->
          <div class="relative h-48 overflow-hidden bg-slate-100">
              <img 
                src="https://picsum.photos/seed/analytics/400/200" 
                alt="Business Analytics" 
                loading="lazy" 
                decoding="async" 
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-[#2d618e]/90 via-[#2d618e]/10 to-transparent opacity-80 group-hover:opacity-60 transition-opacity duration-500"></div>
              
              <span class="absolute top-4 left-4 bg-white/95 backdrop-blur-md text-[#2d618e] text-[10px] font-extrabold px-3 py-1 rounded shadow-sm uppercase tracking-wider border border-slate-100">
                  Operations
              </span>
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col flex-grow bg-white relative">
              <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] font-bold text-[#c0a480] uppercase tracking-widest">MBA-604</span>
              </div>
              
              <h3 class="text-lg font-bold text-[#2d618e] mb-2 leading-tight group-hover:text-[#4ac4d0] transition-colors">Business Analytics</h3>
              <p class="text-xs text-slate-500 mb-4 line-clamp-2">Study Operations concepts with Prof. David Kim.</p>

              <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
                   <div class="flex items-center gap-2">
                      <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-400">
                          P
                      </div>
                      <span class="text-[10px] text-slate-400 font-bold uppercase">View Course</span>
                   </div>
                   <div class="w-8 h-8 rounded-full bg-[#f57238] flex items-center justify-center text-white shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                      <i class="fas fa-arrow-right text-xs"></i>
                   </div>
              </div>
          </div>
      </div>
    </div>
  
             </div>

             <!-- Empty State -->
             <div id="search-empty" class="hidden text-center py-12">
                <i class="far fa-frown text-5xl text-slate-200 mb-4"></i>
                <p class="text-slate-500 font-medium text-lg">No courses found matching your search.</p>
                <button onclick="window.clearSearch()" class="mt-4 text-sm font-bold text-koi-orange hover:underline">Clear Search</button>
             </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-white border-t-4 border-koi-sky relative overflow-hidden pt-16 pb-8">
        <!-- Decorative gradient line at top handled by border-t-4 but enhanced with inner shadow -->
        <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-koi-sky via-koi-orange to-koi-brown opacity-50"></div>

        <div class="max-w-7xl mx-auto px-6 relative z-10">
            <div class="grid grid-cols-1 md:grid-cols-12 gap-12 mb-12">
                 <!-- Brand Column (wider) -->
                 <div class="md:col-span-5 space-y-6">
                    <div class="flex items-center gap-3 mb-2">
                         <div class="w-10 h-10 bg-gradient-to-br from-koi-sky to-koi-dark rounded-lg flex items-center justify-center text-white shadow-lg">
                            <i class="fas fa-graduation-cap text-lg"></i>
                         </div>
                         <span class="font-bold text-2xl tracking-tight text-white">KOI Online MBA</span>
                    </div>
                    <p class="text-slate-400 leading-relaxed max-w-sm text-sm">
                        Empowering future leaders with world-class business education. Experience a seamless digital campus designed for professional growth.
                    </p>
                    <div class="flex gap-4 pt-2">
                        <!-- Socials -->
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white hover:bg-koi-sky hover:scale-110 transition-all border border-white/5"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white hover:bg-koi-sky hover:scale-110 transition-all border border-white/5"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white hover:bg-koi-sky hover:scale-110 transition-all border border-white/5"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white hover:bg-koi-sky hover:scale-110 transition-all border border-white/5"><i class="fab fa-instagram"></i></a>
                    </div>
                 </div>

                 <!-- Links 1 -->
                 <div class="md:col-span-3">
                    <h4 class="font-bold text-white text-lg mb-6 flex items-center gap-2">
                        <span class="w-1 h-6 bg-koi-orange rounded-full"></span> Quick Links
                    </h4>
                    <ul class="space-y-3 text-sm text-slate-400">
                         <li><a href="#" class="hover:text-koi-sky transition-colors flex items-center gap-2 group"><i class="fas fa-chevron-right text-[10px] text-slate-600 group-hover:text-koi-sky"></i> Library Portal</a></li>
                         <li><a href="#" class="hover:text-koi-sky transition-colors flex items-center gap-2 group"><i class="fas fa-chevron-right text-[10px] text-slate-600 group-hover:text-koi-sky"></i> Student Handbook</a></li>
                         <li><a href="#" class="hover:text-koi-sky transition-colors flex items-center gap-2 group"><i class="fas fa-chevron-right text-[10px] text-slate-600 group-hover:text-koi-sky"></i> Academic Calendar</a></li>
                         <li><a href="#" class="hover:text-koi-sky transition-colors flex items-center gap-2 group"><i class="fas fa-chevron-right text-[10px] text-slate-600 group-hover:text-koi-sky"></i> IT Support</a></li>
                    </ul>
                 </div>

                 <!-- Contact -->
                 <div class="md:col-span-4">
                    <h4 class="font-bold text-white text-lg mb-6 flex items-center gap-2">
                        <span class="w-1 h-6 bg-koi-sky rounded-full"></span> Contact Us
                    </h4>
                    <ul class="space-y-4 text-sm text-slate-400">
                        <li class="flex items-start gap-3">
                            <div class="w-8 h-8 rounded bg-white/5 flex items-center justify-center flex-shrink-0 text-koi-orange mt-1">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <span>Level 1, 31 Market Street,<br>Sydney NSW 2000</span>
                        </li>
                        <li class="flex items-center gap-3">
                             <div class="w-8 h-8 rounded bg-white/5 flex items-center justify-center flex-shrink-0 text-koi-orange">
                                <i class="fas fa-envelope"></i>
                             </div>
                            <a href="mailto:ask@koi.edu.au" class="hover:text-white transition-colors">ask@koi.edu.au</a>
                        </li>
                         <li class="flex items-center gap-3">
                             <div class="w-8 h-8 rounded bg-white/5 flex items-center justify-center flex-shrink-0 text-koi-orange">
                                <i class="fas fa-phone"></i>
                             </div>
                            <span>+61 2 9283 3583</span>
                        </li>
                    </ul>
                 </div>
            </div>
            
            <div class="border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-slate-500">
                <p>&copy; 2024 King's Own Institute. CRICOS 03171A. TEQSA PRV12012.</p>
                <div class="flex gap-6">
                    <a href="#" class="hover:text-white transition-colors">Privacy Policy</a>
                    <a href="#" class="hover:text-white transition-colors">Terms of Use</a>
                    <a href="#" class="hover:text-white transition-colors">Accessibility</a>
                </div>
            </div>
        </div>
    </footer>

</div>

<script>
    /**
     * KOI MBA Interactive Module - Production Ready
     * Features:
     * - Namespace isolation to prevent global conflicts
     * - Debounced search (300ms) for performance
     * - Touch support for mobile carousel
     * - Error boundaries for safe execution
     * - Dynamic user data initialization
     */
    
    const KOI_MBA = (function() {
        let currentSlide = 0;
        let searchTimeout = null;
        let resizeTimeout = null;
        const slidesPerPage = { mobile: 1, tablet: 2, desktop: 3 };
        const SEARCH_DEBOUNCE = 300;
        const RESIZE_DEBOUNCE = 150;

        function getVisibleSlides() {
            if (window.innerWidth >= 1024) return slidesPerPage.desktop;
            if (window.innerWidth >= 768) return slidesPerPage.tablet;
            return slidesPerPage.mobile;
        }

        function getTotalSlides() {
            const track = document.getElementById('track');
            // Count actual course items (direct children with min-w class)
            return track ? track.querySelectorAll(':scope > div').length : 0;
        }

        function updateButtonStates() {
            const total = getTotalSlides();
            const visible = getVisibleSlides();
            const prevBtn = document.getElementById('btn-prev');
            const nextBtn = document.getElementById('btn-next');
            
            if (prevBtn) prevBtn.disabled = currentSlide === 0;
            // Disable next when we can't show any more new content
            const maxIndex = Math.max(0, total - visible);
            if (nextBtn) nextBtn.disabled = currentSlide >= maxIndex;
        }

        function slide(direction) {
            try {
                const track = document.getElementById('track');
                if (!track) return;

                const total = getTotalSlides();
                const visible = getVisibleSlides();
                const maxIndex = Math.max(0, total - visible);

                // Move by 1 slide at a time, but respect max boundaries
                if (direction === 'next' && currentSlide < maxIndex) {
                    currentSlide++;
                } else if (direction === 'prev' && currentSlide > 0) {
                    currentSlide--;
                }

                // Clamp value
                currentSlide = Math.max(0, Math.min(currentSlide, maxIndex));
                
                const percentage = (100 / visible) * currentSlide;
                track.style.transform = 'translateX(-' + percentage + '%)';
                updateButtonStates();
            } catch (e) {
                console.error('Carousel error:', e);
            }
        }

        function handleTouchStart(e) {
            if (!e.touches || e.touches.length !== 1) return;
            const track = document.getElementById('track');
            if (!track) return;
            track.dataset.touchStart = e.touches[0].clientX;
            track.dataset.touchStartTime = Date.now();
        }

        function handleTouchEnd(e) {
            const track = document.getElementById('track');
            if (!track || !track.dataset.touchStart) return;
            
            const touchEnd = e.changedTouches[0].clientX;
            const touchStart = parseFloat(track.dataset.touchStart);
            const duration = Date.now() - parseFloat(track.dataset.touchStartTime);
            const distance = touchStart - touchEnd;
            
            if (Math.abs(distance) > 50 && duration < 500) {
                slide(distance > 0 ? 'next' : 'prev');
            }
            
            delete track.dataset.touchStart;
            delete track.dataset.touchStartTime;
        }

        function toggleProfileMenu(e) {
            try {
                e.stopPropagation();
                const menu = document.getElementById('profile-dropdown');
                if (menu) menu.classList.toggle('hidden');
            } catch (e) {
                console.error('Menu toggle error:', e);
            }
        }

        function closeProfileMenu() {
            const menu = document.getElementById('profile-dropdown');
            if (menu) menu.classList.add('hidden');
        }

        function handleSearch() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(performSearch, SEARCH_DEBOUNCE);
        }

        function performSearch() {
            try {
                const input = document.getElementById('global-search');
                const query = input.value.toLowerCase().trim();
                const carouselView = document.getElementById('view-carousel');
                const gridView = document.getElementById('view-grid');
                const clearBtn = document.getElementById('clear-btn');
                const gridContainer = document.getElementById('grid-container');
                const emptyState = document.getElementById('search-empty');
                const countLabel = document.getElementById('result-count');

                if (!gridContainer) return;

                if (query.length > 0) {
                    if (carouselView) carouselView.classList.add('hidden');
                    if (gridView) {
                        gridView.classList.remove('hidden');
                        gridView.classList.remove('opacity-0');
                    }
                    if (clearBtn) {
                        clearBtn.classList.remove('hidden');
                        clearBtn.classList.add('flex');
                    }

                    const items = gridContainer.querySelectorAll('.course-item');
                    let matchCount = 0;

                    items.forEach(item => {
                        const title = (item.getAttribute('data-title') || '').toLowerCase();
                        const code = (item.getAttribute('data-code') || '').toLowerCase();
                        const category = (item.getAttribute('data-category') || '').toLowerCase();

                        if (title.includes(query) || code.includes(query) || category.includes(query)) {
                            item.classList.remove('hidden');
                            matchCount++;
                        } else {
                            item.classList.add('hidden');
                        }
                    });

                    if (countLabel) countLabel.textContent = matchCount + ' found';
                    if (emptyState) {
                        emptyState.classList[matchCount === 0 ? 'remove' : 'add']('hidden');
                    }
                } else {
                    clearSearch();
                }
            } catch (e) {
                console.error('Search error:', e);
            }
        }

        function clearSearch() {
            const input = document.getElementById('global-search');
            if (input) input.value = '';
            const carouselView = document.getElementById('view-carousel');
            const gridView = document.getElementById('view-grid');
            const clearBtn = document.getElementById('clear-btn');

            if (gridView) {
                gridView.classList.add('opacity-0');
                setTimeout(() => {
                    if (gridView) gridView.classList.add('hidden');
                    if (carouselView) carouselView.classList.remove('hidden');
                }, 300);
            }
            if (clearBtn) {
                clearBtn.classList.add('hidden');
                clearBtn.classList.remove('flex');
            }
        }

        function selectCourse(courseId) {
    try {
        // Navigate to the course details page
        window.location.href = 'CourseDetails.html';
        
        // Optional: If you want to pass course ID for customization later
        // window.location.href = 'CourseDetails.html?course=' + courseId;
            } catch (e) {
                console.error('Navigation error:', e);
            }
        }

        function initializeUserData() {
            try {
                const userData = window.KOI_USER || {};
                const fullname = userData.fullname || 'Student';
                const email = userData.email || 'student@koi.edu.au';
                const studentId = userData.studentId || 'N/A';
                const avatarUrl = userData.avatarUrl || 
                    'https://ui-avatars.com/api/?name=' + encodeURIComponent(fullname) + '&background=f57238&color=fff&size=40';

                const elements = {
                    'user-fullname': fullname,
                    'menu-fullname': fullname,
                    'user-studentid': 'Student ID: ' + studentId,
                    'menu-email': email
                };

                Object.entries(elements).forEach(([id, text]) => {
                    const el = document.getElementById(id);
                    if (el) el.textContent = text;
                });

                const avatar = document.getElementById('user-avatar');
                if (avatar) avatar.src = avatarUrl;
            } catch (e) {
                console.error('User init error:', e);
            }
        }

        function init() {
            initializeUserData();

            const track = document.getElementById('track');
            if (track) {
                track.addEventListener('touchstart', handleTouchStart, false);
                track.addEventListener('touchend', handleTouchEnd, false);
                track.classList.add('koi-mba-carousel-touch');
            }

            const menu = document.getElementById('profile-dropdown');
            if (menu) menu.addEventListener('click', e => e.stopPropagation());

            const searchInput = document.getElementById('global-search');
            if (searchInput) searchInput.addEventListener('input', handleSearch);

            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(updateButtonStates, RESIZE_DEBOUNCE);
            });

            document.addEventListener('click', closeProfileMenu);
            updateButtonStates();
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

        return {
            slide: slide,
            toggleProfileMenu: toggleProfileMenu,
            handleSearch: handleSearch,
            clearSearch: clearSearch,
            selectCourse: selectCourse
        };
    })();

    // Expose API to window for inline handlers
    window.slide = (dir) => KOI_MBA.slide(dir);
    window.toggleProfileMenu = (e) => KOI_MBA.toggleProfileMenu(e);
    window.handleSearch = () => KOI_MBA.handleSearch();
    window.clearSearch = () => KOI_MBA.clearSearch();
    window.selectCourse = (id) => KOI_MBA.selectCourse(id);

</script>

